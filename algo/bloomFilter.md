## 布隆过滤器(Bloom-filter)

在介绍布隆过滤器之前，我们先来谈一个比较典型的应用场景。假设系统中有一个用户黑名单，有大约20亿个long类型的uuid，我们需要经常判断访问系统的用户是否在黑名单中，对于这个需求，大家的第一印象可能是使用hashSet或hashMap这种数据结构，但是内存将成为瓶颈，此时布隆过滤器就派上用场了。

### 应用场景

布隆过滤器实际是一种性能（时间，空间）更好的hash结构，布隆过滤器有以下特点

1. 仅支持添加，不支持删除
2. 如果bloom认为元素不在集合中，则它一定不在集合中
3. 如果bloom任务元素在集合中，则它可能在集合中

有的同学问，如果不想要元素被bloom误判该怎么办，此时，可以使用分治的思想，将大数据集分散成多个小数据集进行判断.

### 原理

bloom-filter由多个hash函数+1个bit数组构成。假设有三个hash函数，当加入“wpf”这个单词时，三个hash函数的结果分别是2、4、8，则将2、4、8三个位置1，在查找时，如果元素的几个hash值对应位为1则认为元素存在，显然这样会造成误判，但是如果某一位为0，则元素一定不存在.

bloom过滤器的误判率跟hash函数的个数和bloom的长度有关

### 实现

主要是bit数组和hash函数的实现，bit数组可以使用bitset